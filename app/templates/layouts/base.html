<!--

SMART COMPOST - MODEL PROJECT.

---   base layout file

* Author  -  enos muthiani
* git     -  https://github.com/lyznne
* date    - 22 Nov 2024
* email   - emuthiani26@gmail.com


                                    Copyright (c) 2024      - enos.vercel.app

 -->
<!DOCTYPE html>
<html lang="en">

        <head>
                {% include "includes/meta.html" %}
                <!-- specific css goes here  -->
                {% block stylesheets %}
                {% endblock stylesheets %}
        </head>

        <body>
                <div class="body">

                        {% include 'includes/topbar.html' %}
                        {% include 'includes/flash-messages.html' %}
                        {% block content %}{% endblock %}

                </div>
                <!-- Specific JS goes HERE -->
                <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
                <script>
                        document.addEventListener("DOMContentLoaded", function () {
                                const socket = io.connect("http://localhost:5000/notifications");

                                socket.on("new_notification", function (data) {
                                        if (data.user_id === {{ current_user.id }
                                }) {
                                        alert("New Notification: " + data.message);
                                }
                        });
                    });
                </script>


                {% block javascripts %}{% endblock %}
        </body>

</html>
